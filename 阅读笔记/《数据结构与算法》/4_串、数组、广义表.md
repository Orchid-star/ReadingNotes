# 第4章 串、数组和广义表

串是内容受限的线性表，栈和队列是操作受限的线性表。

数组和广义表是线性结构的推广。



## 4.1 串

**串**（string)是零个或多个任意字符组成的有限序列。如s="a~1~a~2~......a~n~"。

概念：

串名、串值、串长、空串。

**子串**：一个串任意个连续字符组成的子序列（含空串）称为该串的子串。

**主串**：包含字串的串相应地称为主串。

**字符位置**：字符在序列中的序号为该字符在串中的位置。

**子串位置**：子串第一个字符在主串中的位置（指逻辑位置，从1开始）。

**空格串**：由一个或多个空格组成的串，与空串不同。

**串相等**：当且仅当两个串的长度相等并且对应位置上的字符都相同时，这两个串才是相等的。

**所有的空串都是相等的**



**案例引入**

病毒检测



**串的类型定义、存储结构及其运算**

```c
ADT String {
    数据对象：D={ai | ai ∈字符， i=1,2,...n,n>-0}
    数据关系：R1={<ai-1, ai>| ai-1,ai ∈D}
    基本操作：
    （1）StrAssign(&T, chars) //串赋值
    （2）StrCompare(S,T) //串比较
    （3）StrLength(S) //求串长
    （4）Concat(&T, S1, S2)  //串连结
    （5）SubString(&Sub, S, pos, len); //求字串
    （6）StrCopy(&T, S); //串拷贝
    （7）StrEmpty(S); //串判空
    （8）ClearString(&S); //清空串
    （9）Index(S, T, pos); //字串位置
    （10）Replace(&S,T,V); //串替换
    （11）StrInsert(&S,pos,T); // 字串插入
    （12)StrDelete(&S, pos, len); //字串删除
    （13）DestroyString（&S); //串销毁
}
```

**顺序串**

```c
#define MAXLEN 255
typedef struct {
    char ch[MAXLEN + 1];  //存储串的一维数组，为了运算方便，[0]闲置不用
    int length;  //串的当前长度
}SString;
```

**链串** --块链结构

```c
#define CHUNKSIZE 80  //块的大小可由用户定义

typedef struct Chunk {
    char ch[CHUNKSIZE];
    struct Chunk *next;
}Chunk;

typedef struct {
    Chunk *head, *tail;  //串的头指针、尾指针
    int curlen; //串的当前长度。
}LString;  //字符串的块链结构
```

**串的模式匹配算法**

算法目的：确定主串中所含的字串（模式串）第一次出现的位置（定位）

算法应用：搜索殷勤、拼写检查、语言翻译、数据压缩

算法种类：BF算法（Brute-Force，又称古典的、经典的、朴素的、穷举的）、KM算法（速度快）

**BF算法**

亦称简单匹配算法。采用穷举法的思路。算法思路是从S的每一个字符开始依次与T的字符进行匹配。

```c
int index_bf(SString S, SString T, int pos = 0)
{
    int i = pos, j = 1;
    while (i <= S.length && j <= T.length) {
        if (s.ch[i] == t.ch[j]) {
            ++i;
            ++j;
        } else {
            i = i - (j - 1) + 1;
            j = 1;
        }
    }
    if (j >= T.length) {
        return (i - T.length);
    }
    return 0; //匹配不成功
}
//时间复杂度O(m*n)
```

**KMP算法**

```c

```



## 4.2 数组

**数组**：按照一定格式排列起来的具有相同类型的数据元素的集合。

**一维数组**：若线性表中的数据元素为非结构的简单元素，则称为一维数组。

**一维数组的逻辑结构**：线性结构，定长的线性表

**生命格式**：数据类型 变量名称[长度]

例如 int num[5] = {0, 1, 2, 3, 4};

**二维数组**： 声明格式： 数据类型 变量名称\[行数][列数] (行是1维，列是2维)

**数组特点**：结构固定

**数组基本操作**：除了结构的初始化，只有取元素和修改元素值的操作。



### 4.2.1 数组的顺序存储结构

数组特点：结构固定，维数和维界不变

存储结构：一般使用顺序存储

**注意**：数组可以是多维的，但存储元素的内存单元地址是一维的，因此，在存储数组结构之前，需要解决将多维关系映射到一维关系的问题。

二维数组可有两种存储方式：

- 以行序为主序
- 以列序为主序



**二维行序为主序a\[m][n]**

a\[i][j]的地址: i * n + j



**三维数组a\[m1]\[m2][m3]**

loc(i1, i2, i3) = a + i1 * m2 *m3 + i2 * m3 + i3

按页、行、列存放



### 4.2.2  特殊矩阵的压缩存储

**矩阵**：一个由mxn个元素排成的m行n列的表。



**压缩存储**

若多个数据元素的值相同，则只分配一个元素值的存储空间，且零元素不占存储空间。

**能够压缩的矩阵**

一些特殊矩阵，如：对称矩阵、对角矩阵、三角矩阵、稀疏矩阵等

**稀疏矩阵**

矩阵中非零元素的个数较少（一般小于5%）

三元组法，（i,j,aij）以及总行数、总列数、非零元素总个数

**对称矩阵**

只存储下三角（包括主对角线）的数据元素，共占用n(n+1)/2个空间

a\[n][n] = n(n-1)/2 +(n-1) = n(n+1)/2-1

**三角矩阵**

占用空间n(n+1)/2+1

**对角矩阵**

按对角线顺序存储



## 4.3 广义表

**广义表**（又称列表Lists)是n >= 0个元素a0，a1，...，an-1的有限序列，其中每一个ai或是原子，或者是一个广义表。

通常记作：LS=(a1, .. an)

**表头**

head(LS ) = a1, 表头可以是原子，也可以是子表

**表尾**

除表头之外的其它元素组成的表。

tail(LS) = (a2, .. an)

表尾不是最后一个元素，而是一个子表

**性质**

- 数据元素有相对次序：一个直接前驱和一个直接后继
- 长度定义为最外层所包含的元素的个数。
- 广义表深度定义为展开后的括号的重数

